= Notification Groups

== Querying
:endpoint: v2/notification_groups

[cols="1,3a", stripes="even"]
|===
| Endpoint
| https://api.gocarrot.com/{endpoint}
| Request Type
| GET
| Content-Type
| application/json
| Rate Limiting
| 5 requests per second
|===

Description: The `v2/notification_groups` endpoint allows for querying all notification groups for a given game.

=== Required Parameters

[cols="1,3a", stripes="even"]
|===
| game_id
| Your Teak App ID
| secret_key
| Your Teak Server Secret
|===

=== Optional Parameters

[cols="1,3a", stripes="even"]
|===
| limit
| The number of notification groups to return. Will be clamped to [1, 1000]. Defaults to 1,000
| after
| A pagination token from a previous call to {endpoint}
|===


=== Success Response

[cols="1,3a"]
|===
| Status Code
| 200
| Response Body
| JSON dictionary with 'status' and 'notification_groups' keys, and potentially a `paging` key.
[cols="1,3a", stripes="even"]
!===
! status
! 'ok'
! notification_groups
! An array of <<type_notification_group,NotificationGroup>> dictionaries.
! paging
! JSON dictionary with 'cursors' and 'next' keys. +
'cursors' will be a dictionary containing an 'after' key, whose value can be passed as the 'after' parameter to {endpoint} to retrieve the next page. +
'next' will be the full path and non-authorization query parameters to retrieve the next page.
!===
| Example
| [source, json, subs="attributes"]
----
{
  "status":"ok",
  "notification_groups": [
    ...
  ]
}
----
|===


=== Error Responses

==== Not Found

:response-code: 404
:response-body: JSON dictionary with 'status' and 'errors' keys. 'status' will be 'error'. 'errors' will be a dictionary in which the keys are the parameter which could not be found, and the values will be an array of human readable messages indicating what could not be found.
:response-example: {"status":"error","errors":{"game_id":["Unknown app id 42"]}}
include::partial$response.adoc[]

==== Rate Limit Response

:response-code: 429
:response-body: JSON dictionary with 'status' and 'errors' keys. 'status' will be 'rate_limit'. 'errors' will contain the key 'rate_limit'
:response-example: {"status":"rate_limit","errors":{"rate_limit":["/v2/notification_groups may only be called 5 times per second. Please wait a second and try again"]}}
include::partial$response.adoc[]

== Types

This section outlines the shape of the various types of entity you will encounter when using this API.

=== anchor:type_notification_group[]NotificationGroup

`NotificationGroup` is a lorem ipsum dolor sit amet.  It is a dictionary containing the following keys:

[cols="1,2,5a", stripes="even"]
|===
| identifier
| string
| The unique identifier of this NotificationGroup.

| opt_out_category
| string
| The unique identifier of the opt-out category to which this NotificationGroup belongs.

| platforms
| dictionary(<<type_platform,Platform>>, <<type_platform_group,PlatformGroup>>)
| A dictionary whose keys are <<type_platform,Platform>> strings, and whose values are <<type_platform_group,PlatformGroup>> dictionaries.

| created_at
| string
| The ISO8601 timestamp indicating when this NotificationGroup was originally created.

| updated_at
| string
| The ISO8601 timestamp indicating when this NotificationGroup was last updated.
|===

(Note: A '?' at the end of a type indicates that this field may be ommitted.)

=== anchor:type_platform_group[]PlatformGroup

`PlatformGroup` is a lorem ipsum dolor sit amet.  It is a dictionary containing the following keys:

[cols="1,2,5a", stripes="even"]
|===
| identifier
| string
| The unique identifier of the NotificationGroup to which this PlatformGroup belongs.

| is_ab_test
| boolean
| Whether or not this platfrom group has an active A/B test.  This will be true if there are multiple <<type_notification_instance,NotificationInstance>>s.

| start_time
| string?
| The ISO8601 timestamp indicating when the A/B test began.

| instances
| array(<<type_notification_instance,NotificationInstance>>)
| An array of <<type_notification_instance,NotificationInstance>> dictionaries.

| created_at
| string
| The ISO8601 timestamp indicating when this NotificationGroup was originally created.

| updated_at
| string
| The ISO8601 timestamp indicating when this NotificationGroup was last updated.
|===

(Note: A '?' at the end of a type indicates that this field may be ommitted.)

=== anchor:type_notification_instance[]NotificationInstance

`NotificationInstance` is a lorem ipsum dolor sit amet.  It is a dictionary containing the following keys:

[cols="1,2,5a", stripes="even"]
|===
| badge_state
| string
| ...

| sets_badge
| boolean
| ...

| is_ab_control
| boolean
| ...

| link_type
| string
| ...

| show_in_foreground
| boolean
| ...

| skip_game_open
| boolean
| ...

| test_weight
| integer
| ...

| bundle_name
| string?
| ...

| reward_config
| <<type_reward_config,RewardConfig>>?
| ...

| translations
| array(<<type_translation,Translation>>)
| ...

| created_at
| string
| The ISO8601 timestamp indicating when this NotificationInstance was originally created.

| updated_at
| string
| The ISO8601 timestamp indicating when this NotificationInstance was last updated.
|===

(Note: A '?' at the end of a type indicates that this field may be ommitted.)

=== anchor:type_translation[]Translation

`Translation` is a lorem ipsum dolor sit amet.  It is a dictionary containing the following keys:

[cols="1,2,5a", stripes="even"]
|===
| loop_large_media
| boolean
| ...

| sound_filename
| string
| ...

| sound_state
| <<type_sound_state,SoundState>>
| ...

| translation_group_name
| string
| ...

| title
| string?
| ...

| subtitle
| string?
| ...

| message
| string?
| ...

| locales
| array(string)?
| ...

| email_content_mode
| <<type_email_content_mode,EmailContentMode>>?
| ... _(Only present when platform is `email`.)_

| android_content_mode
| <<type_android_content_mode,AndroidContentMode>>?
| ... _(Only present when platform is `android`.)_

| android_icon_mode
| <<type_android_icon_mode,AndroidIconMode>>?
| ... _(Only present when platform is `android`.)_

| android_stack_expanded_view
| boolean
| ... _(Only present when platform is `android`.)_

| created_at
| string
| The ISO8601 timestamp indicating when this NotificationInstance was originally created.

| updated_at
| string
| The ISO8601 timestamp indicating when this NotificationInstance was last updated.
|===

(Note: A '?' at the end of a type indicates that this field may be ommitted.)


=== anchor:type_reward_config[]RewardConfig

`RewardConfig` is a lorem ipsum dolor sit amet.  It is a dictionary containing the following keys:

[cols="1,2,5a", stripes="even"]
|===
| maximum_age
| integer
| ...

| maximum_age_unit
| <<type_duration_unit,DurationUnit>>
| ...
|===

(Note: A '?' at the end of a type indicates that this field may be ommitted.)


=== anchor:type_platform[]Platform

`Platform` is a lorem ipsum dolor sit amet.  It is an enum comprised of one of the following values:

[cols="1,3a", stripes="even"]
|===
| android
| ...

| email
| ...

| fb
| ...

| ios
| ...

| web
| ...
|===


=== anchor:type_duration_unit[]DurationUnit

`DurationUnit` is a lorem ipsum dolor sit amet.  It is an enum comprised of one of the following values:

[cols="1,3a", stripes="even"]
|===
| minutes
| ...

| hours
| ...

| days
| ...
|===


=== anchor:type_email_content_mode[]EmailContentMode

`EmailContentMode` is a lorem ipsum dolor sit amet.  It is an enum comprised of one of the following values:

[cols="1,3a", stripes="even"]
|===
| custom
| ...

| default
| ...
|===


=== anchor:type_android_content_mode[]AndroidContentMode

`AndroidContentMode` is a lorem ipsum dolor sit amet.  It is an enum comprised of one of the following values:

[cols="1,3a", stripes="even"]
|===
| default
| ...

| ios_style
| ...
|===


=== anchor:type_android_icon_mode[]AndroidIconMode

`AndroidIconMode` is a lorem ipsum dolor sit amet.  It is an enum comprised of one of the following values:

[cols="1,3a", stripes="even"]
|===
| builtin
| ...

| custom
| ...

| none
| ...
|===


=== anchor:type_sound_state[]SoundState

`SoundState` is a lorem ipsum dolor sit amet.  It is an enum comprised of one of the following values:

[cols="1,3a", stripes="even"]
|===
| system_default
| ...

| parent
| ... _(This value is only allowed if the Translation is not part of the default translation group.)_

| silent
| ...

| custom
| ...

| category_default
| ...
|===
